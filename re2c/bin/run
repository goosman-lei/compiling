#!/bin/bash
function real_path() {
    [ ! -d "$1" ] && mkdir -p "$1"
    echo $( cd "$1" && pwd )
}
SCRIPT_PATH=$( cd `dirname ${BASH_SOURCE[0]}` && pwd )
OUTPUT_PATH=$( real_path $SCRIPT_PATH/../output )

COMMAND="$OUTPUT_PATH/a.out"
idx=0; for arg in $@ ; do idx=$(( $idx + 1 )); [ $idx -gt 1 ] && COMMAND="$COMMAND $arg"; done

re2c -o $OUTPUT_PATH/example.c "$1"
gcc --std=c99 $OUTPUT_PATH/example.c -o $OUTPUT_PATH/a.out
$COMMAND
